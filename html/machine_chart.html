<!--<!DOCTYPE html>
<!--[if lt IE 7 ]>
<html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>
<html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>
<html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <!-- Basic Page Needs
  ================================================== -->
    <meta charset="utf-8">
    <title>KwikPay Dashboard</title>
    <!-- SEO Meta
  ================================================== -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="distribution" content="global">
    <meta name="revisit-after" content="2 Days">
    <meta name="robots" content="ALL">
    <meta name="rating" content="8 YEARS">
    <meta name="Language" content="en-us">
    <meta http-equiv="reply-to" content="">
    <meta name="GOOGLEBOT" content="NOARCHIVE">
    <!-- Mobile Specific Metas
  ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- CSS
  ================================================== -->
    <link rel="stylesheet" href="css/custom-style.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.jqueryui.min.css">

    <link href="https://fonts.googleapis.com/css?family=Signika:300,400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" type="text/css" media="all" href="css/daterangepicker.css"/>


    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    <!--[if gte IE 9]>
    <style type="text/css">
        .gradient {
            filter: none;
        }
    </style>
    <![endif]-->
    <!-- JS
    ================================================== -->

    <script src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/moment.min.js"></script>


</head>

<body>
<!-- HEADER START -->

<!-- HEADER END -->
<!-- CONTAINER START -->

<section>
    <div class="content">

        <div class="row_content">
            <div class="sidebar_left contentscroll mCustomScrollbar">
                <div class="left_logo">
                    <a href="#"><img src="images/logo-2.png"/></a>
                </div>
                <div class="sidebar_left_menu">
                    <h3>Provider Details<span class="plusminus">-</span></h3>
                    <ul style="display: block;">
                        <li><a href="#">Provider Details</a></li>
                        <li><a href="#">Free ride definition</a></li>
                        <li><a href="#">Free ride duration</a></li>
                    </ul>
                    <h3>Amusement locations <span class="plusminus">+</span></h3>
                    <ul>
                        <li><a href="#">Amusement locations</a></li>
                    </ul>

                    <h3>Sales Data<span class="plusminus">+</span></h3>
                    <ul>
                        <li><a href="#">Payment transaction</a></li>
                        <li><a href="#">App transaction data</a></li>
                        <li><a href="#">Cash collection data</a></li>
                    </ul>
                    <h3>Charts<span class="plusminus">+</span></h3>
                    <ul>
                        <li><a href="#">Dashboard</a></li>
                        <li><a href="#">Machine charts</a></li>
                    </ul>
                    <h3>Reports<span class="plusminus">+</span></h3>
                    <ul>
                        <li><a href="#">Report</a></li>
                        <li><a href="#">Consolidated report</a></li>
                    </ul>
                </div>
            </div>
            <div class="right_wrapper_content">
                <div class="top_bar">
                    <div class="top_bar_left">
                        <p>Good afternoon! Game on Today's Date : 2/12/2019 12:58:27 PM</p>
                    </div>
                    <div class="top_bar_right">
                        <div class="top_bar_menu">
                            <a href="#"><span><img src="images/top_icon.png"/></span><i
                                    class="fa fa-chevron-down"></i></a>
                            <ul class="top_bar_down">
                                <li><a href="#">My profile</a></li>
                                <li><a href="#">Contact us</a></li>
                                <li><a href="#">Logout</a></li>
                            </ul>
                        </div>
                    </div>

                </div>
                <div class="wrapper_dashboard_scroll contentscroll mCustomScrollbar">
                    <div class="wrapper_dashboard">
                        <div class="titel_location titel_location_noicon">
                            <h1>Machine Chart</h1>
                        </div>

                        <div class="clear"></div>
                        <div class="chart_form">
                            <div class="full_width_chart_container">
                                <div class="flex align-center">
                                    <div class="button_location_right inputpicker_content_box w-auto">
                                        <div class="input_picker_dashboard inputpicker_left1">
                                            <input type="text" class="form-control demo_picker"/>
                                        </div>
                                    </div>
                                    <div id="machine_select_container" class="ml-10" style="min-width: 300px;">
                                        <div class="custom-select" style="width: 100%">
                                            <select id="machine_select">
                                                <option>All Machines</option>
                                                <option>All Machines</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="chart_content">
                                    <!-- <div class="dashboard_weekly_titel1">
                                        <ul>
                                            <li class="cash_sales_icon1"><span></span>App</li>
                                            <li class="cash_sales_icon2"><span></span>Cash</li>
                                            <li class="cash_sales_icon3"><span></span>Cashless</li>
                                        </ul>
                                    </div> -->
                                    <div id='linechart_machine_parent' style='height: 400px'>
                                        <canvas id="linechart_machine"></canvas>
                                    </div>
                                </div>

                            </div>
                            <div class="full_width_chart_container">
<!--                                <div class="button_location_right inputpicker_content_box">-->
<!--                                    <div class="input_picker_dashboard inputpicker_left1">-->
<!--                                        <input type="text" class="form-control demo_picker"/>-->
<!--                                    </div>-->
<!--                                </div>-->
                                <!-- <div class="dashboard_weekly_right machinechart_right2">
                                        <div class="dashboard_weekly_titel1">
                                            <ul>
                                                <li class="cash_sales_icon1"><span></span>Downtime</li>
                                                <li class="cash_sales_icon2"><span></span>Uptime</li>
                                            </ul>
                                            <p>* Maximum range can be 7days</p>
                                        </div>

                                        <div class="dashboard_current_right1">
                                            <div id="bar-chart-h" class="chart_width_bar"></div>
                                        </div>
                                    </div> -->
                                <div class="chart_content">
                                    <!-- <div class="dashboard_weekly_titel1">
                                        <ul>
                                            <li class="cash_sales_icon1"><span></span>App</li>
                                            <li class="cash_sales_icon2"><span></span>Cash</li>
                                            <li class="cash_sales_icon3"><span></span>Cashless</li>
                                        </ul>
                                    </div> -->
                                    <div id='linechart_machine_parent2' style='height: 400px'>
                                        <canvas id="linechart_machine2"></canvas>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</section>
<!-- CONTAINER END -->
<!-- FOOTER START -->

<footer></footer>

<!-- FOOTER END -->

</body>


<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/jquery.dataTables.min.js"></script>
<script src="js/dataTables.jqueryui.min.js "></script>


<script src="js/app.config.js"></script>


<script src="js/bootstrap.min.js"></script>


<script src="js/app.min.js"></script>


<script src="js/chart.min.js"></script>


<script src="js/jquery.flot.cust.min.js"></script>
<script src="js/jquery.flot.orderBar.min.js"></script>
<script type="text/javascript" src="js/dp.js"></script>
<script type="text/javascript" src="js/app.js"></script>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<script type="text/javascript" src="js/machineChart.js"></script>
<script>
    $(document).ready(function () {
        $('#example').DataTable();
    });

    (function ($) {
        $(window).on("load", function () {

            $("a[rel='load-content']").click(function (e) {
                e.preventDefault();
                var url = $(this).attr("href");
                $.get(url, function (data) {
                    $(".contentscroll .mCSB_container").append(
                        data); //load new content inside .mCSB_container
                    //scroll-to appended content
                    $(".contentscroll").mCustomScrollbar("scrollTo", "h2:last");
                });
            });

            $(".contentscroll").delegate("a[href='top']", "click", function (e) {
                e.preventDefault();
                $(".contentscroll").mCustomScrollbar("scrollTo", $(this).attr("href"));
            });

        });
    })(jQuery);


    function selectRun() {
        var x, i, j, selElmnt, a, b, c;
        /*look for any elements with the class "custom-select":*/
        x = document.getElementsByClassName("custom-select");
        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            /*for each element, create a new DIV that will act as the selected item:*/
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);
            /*for each element, create a new DIV that will contain the option list:*/
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 1; j < selElmnt.length; j++) {
                /*for each option in the original select element,
                create a new DIV that will act as an option item:*/
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                c.addEventListener("click", function (e) {
                    /*when an item is clicked, update the original select box,
                    and the selected item:*/
                    var y, i, k, s, h;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    h = this.parentNode.previousSibling;
                    for (i = 0; i < s.length; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {
                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;
                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            for (k = 0; k < y.length; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();

                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function (e) {
                /*when the select box is clicked, close any other select boxes,
                and open/close the current select box:*/
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
            });
        }

        function closeAllSelect(elmnt) {
            /*a function that will close all select boxes in the document,
            except the current select box:*/
            var x, y, i, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            for (i = 0; i < y.length; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i)
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < x.length; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
        }

        /*if the user clicks anywhere outside the select box,
        then close all select boxes:*/
        document.addEventListener("click", closeAllSelect);
    }

    function selectUpdate() {
        var x, i, j, selElmnt, a, b, c;
        /*look for any elements with the class "custom-select":*/
        x = document.getElementsByClassName("custom-select");
        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            b = x[i].getElementsByClassName("select-items")[0];
            b.innerHTML = '';
            for (j = 1; j < selElmnt.length; j++) {
                /*for each option in the original select element,
                create a new DIV that will act as an option item:*/
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                b.appendChild(c);

                c.addEventListener("click", async function (e) {
                    console.log('Click')
                    /*when an item is clicked, update the original select box,
                    and the selected item:*/
                    var y, i, k, s, h;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    h = this.parentNode.previousSibling;
                    for (i = 0; i < s.length; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {
                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;
                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            for (k = 0; k < y.length; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();

                    if (this.innerHTML === 'All Machines') {
                        const ctx = window.machineChart.createCanvas();
                        const { start, end, dayName, isCompressed } = window.machineChart.updateData;
                        await window.machineChart.getDateRange(start, end, dayName, isCompressed);
                        const myNewChart = new Chart(ctx, {
                            type: 'line',
                            data: window.machineChart.lineData,
                            options: window.lineOptions
                        });
                        return;
                    }
                    window.machineChart.displayOneMachineData(s.options[i].getAttribute("value"));
                    selectUpdate();

                });
            }
        }
    }

    selectRun();

    $('.demo_picker').daterangepicker({
        startDate: moment().subtract(29, 'days'),
        endDate: moment(),
        showCustomRangeLabel: false,
        "ranges": {
            'Last 30 Days': [ moment().subtract(29, 'days'), moment() ],
            '3 Month': [ moment().subtract(3, 'month'), moment() ],
            '6 Month': [ moment().subtract(6, 'month'), moment() ],
        },
    }, async (start, end, label) => {

        let isCompressed = false;
        let dayName = null
        const ctx = window.machineChart.createCanvas();
        switch (label) {
            case 'Last 30 Days':
                dayName = '30DAYS';
                break;
            case '3 Month':
                dayName = '3MONTH';
                isCompressed = true;
                break;
            case '6 Month':
                dayName = '6MONTH';
                isCompressed = true;
                break;
            default:
                dayName = '30DAYS';
                break;
        }
        await window.machineChart.getDateRange(start, end, dayName, isCompressed);

        window.machineChart.updateData = { start, end, dayName, isCompressed };

        // myNewChart.update();
        const myNewChart = new Chart(ctx, {
            type: 'line',
            data: window.machineChart.lineData,
            options: window.lineOptions
        });
    });

    (async () => {
        function MachineChart(skip) {
            this.appSales = 0;
            this.cashSales = 0;
            this.contactlessSales = 0;
            this.res = null;
            this.dates = null;
            this.lineData = null;
            this.skip = skip;
            this.machineList = [];

            this.getMs = function (date) {
                return new Date(date).setHours(0, 0, 0, 0);
            }
            this.getCorrectDateFormat = function (date) {
                date = new Date(date);
                return date.getFullYear() + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-' + ('0' + (date.getDate())).slice(-2);
            }
            this.fetchData = async function (name) {

                const reqBody = JSON.stringify({
                    "APISERVICE": 'KP_AMUSEMENT_'+  name + '_CHART_DATA',
                    "LOGIN_USER_ID": "7"
                })
                const response = await fetch('https://api.kwikpay.be/kwikpayapi/jsonrequest', {
                    method: 'POST',
                    header: 'Content-Type: application/json',
                    body: reqBody
                });
                return await response.json();
            }
            this.createLoader = function () {
                const parentNode = document.getElementById('linechart_machine_parent')
                parentNode.style.position = 'relative';
                const spinner = document.createElement('img')
                spinner.id = 'loader'
                spinner.style.position = 'absolute'
                spinner.style.top = '50%'
                spinner.style.left = '50%'
                spinner.style.width = '50px'
                spinner.style.height = '50px'
                spinner.style.transform = 'translate(-50%, -50%)'
                spinner.src = './images/spinner.gif'
                parentNode.appendChild(spinner)
            }
            this.deleteLoader = function () {
                document.getElementById('loader').remove()
            }
            this.getDateRange = async function (start, end, name, isCompressed) {

                this.dates = this.generateDataObject(this.getMs(start), this.getMs(end), {
                    APP_SALES: 0,
                    CASH_SALES: 0,
                    CONTACTLESS_SALES: 0
                });
                this.createLoader()
                try {
                    this.res = await this.fetchData(name);
                    this.deleteLoader();
                    this.createMachineList();
                    this.displayData(isCompressed, start, true);
                } catch (e) {
                    this.deleteLoader();
                    setTimeout(() => {
                        alert('Error in Api')
                    }, 0)
                }
            }
            this.generateDataObject = function (start, end, param) {
                let daysBetween = 0;
                daysBetween = Math.round((end - start) / 86400000) + 1;
                const generateData = new Array(daysBetween).fill();
                let dates = {};
                let currentDate = start;
                generateData.map((el, index) => {
                    dates = {
                        ...dates,
                        [this.getCorrectDateFormat(currentDate)]: param
                    }
                    currentDate += 86400000
                })
                return dates;
            }
            this.createMachineList = function () {
                const map = new Map();
                for (const item of this.res.KPRESPONSE.CHART_DATA_LIST) {
                    if (!map.has(item.MACHINE_NUMBER)) {
                        map.set(item.MACHINE_NUMBER, true);
                        this.machineList.push({
                            ...item
                        });
                    }
                }

                let selectDOM = document.getElementById('machine_select');
                let option;

                this.machineList.map(item => {
                    option = document.createElement("option");
                    option.value = item.MACHINE_NUMBER;
                    option.text = item.MACHINE_NUMBER;
                    selectDOM.add(option);
                });

                selectUpdate();

            }
            this.redoneData = function (initialData) {
                let newDate = {};
                const dateLength = Object.keys(this.dates).length;
                Object.keys(this.dates).reduce((a, b, index) => {
                        if (index % this.skip === 0 && index !== 0) {
                            newDate = {
                                ...newDate,
                                [a]: {
                                    APP_SALES: newDate[a].APP_SALES / this.skip,
                                    CASH_SALES: newDate[a].CASH_SALES / this.skip,
                                    CONTACTLESS_SALES: newDate[a].CONTACTLESS_SALES / this.skip
                                }
                            }
                            a = b
                        }
                        if (index % this.skip !== 0 && dateLength - 1 === index) {
                            newDate = {
                                ...newDate,
                                [a]: {
                                    APP_SALES: newDate[a].APP_SALES / ((dateLength - 1) % this.skip),
                                    CASH_SALES: newDate[a].CASH_SALES / ((dateLength - 1) % this.skip),
                                    CONTACTLESS_SALES: newDate[a].CONTACTLESS_SALES / (dateLength - 1 %
                                        this.skip)
                                }
                            }
                            a = b
                        }
                        newDate = {
                            ...newDate,
                            [a]: {
                                APP_SALES: newDate[a] === undefined ? this.dates[b].APP_SALES :
                                    newDate[a].APP_SALES + this.dates[b].APP_SALES,
                                CASH_SALES: newDate[a] === undefined ? this.dates[b].CASH_SALES :
                                    newDate[a].CASH_SALES + this.dates[b].CASH_SALES,
                                CONTACTLESS_SALES: newDate[a] === undefined ? this.dates[b]
                                    .CONTACTLESS_SALES : newDate[a].CONTACTLESS_SALES + this.dates[b]
                                    .CONTACTLESS_SALES
                            }

                        }
                        return a
                    },
                    this.getCorrectDateFormat(this.getMs(initialData))
                );
                return newDate
            }
            this.displayData = function (isCompressed, initialData, flag) {
                if (flag) {
                    this.res.KPRESPONSE.CHART_DATA_LIST.map((el) => {
                        Object.keys(this.dates).map((item) => {
                            if (item === el.TXN_DATE) {
                                return this.dates = {
                                    ...this.dates,
                                    [item]: {
                                        APP_SALES: +this.dates[item].APP_SALES + +el.APP_SALES,
                                        CASH_SALES: +this.dates[item].CASH_SALES + +el
                                            .CASH_SALES,
                                        CONTACTLESS_SALES: +this.dates[item]
                                            .CONTACTLESS_SALES + +el.CONTACTLESS_SALES,
                                    }
                                }
                            }
                        })
                    });
                }
                if (isCompressed) this.dates = this.redoneData(initialData);
                this.appSales = Object.keys(this.dates).map(el => this.dates[el].APP_SALES);
                this.cashSales = Object.keys(this.dates).map(el => this.dates[el].CASH_SALES);
                this.contactlessSales = Object.keys(this.dates).map(el => this.dates[el].CONTACTLESS_SALES);
                this.lineData = {
                    labels: Object.keys(this.dates),
                    datasets: [ {
                        label: "App",
                        backgroundColor: "rgba(0,88,30,0.1)",
                        borderColor: "#00581E",
                        data: this.appSales
                    },
                        {
                            label: "Cash",
                            backgroundColor: "rgba(255,178,0,0.1)",
                            borderColor: "#FFB200",
                            data: this.cashSales
                        },
                        {
                            label: "Cashless",
                            backgroundColor: "rgba(140,214,0,0.1)",
                            borderColor: "#8CD600",
                            data: this.contactlessSales
                        }
                    ]
                };
            }
            this.displayOneMachineData = async function (machineNumber) {
                let machine = this.machineList.find(item => item.MACHINE_NUMBER == machineNumber);
                this.res.KPRESPONSE.CHART_DATA_LIST.map((el) => {
                    Object.keys(this.dates).map(item => {
                        if (item === el.TXN_DATE && el.MACHINE_NUMBER === machine.MACHINE_NUMBER) {
                            return this.dates = {
                                ...this.dates,
                                [item]: {
                                    APP_SALES: +el.APP_SALES,
                                    CASH_SALES: +el.CASH_SALES,
                                    CONTACTLESS_SALES: +el.CONTACTLESS_SALES,
                                }
                            }
                        }
                    });
                });
                let ctx = this.createCanvas();
                this.displayData(false, '2020-01-01', false);
                const myNewChart = new Chart(ctx, {
                    type: 'line',
                    data: window.machineChart.lineData,
                    options: window.lineOptions
                });
            }
            this.createCanvas = function () {
                document.getElementById("linechart_machine").remove();
                const canvas = document.createElement('canvas');
                canvas.id = 'linechart_machine';
                canvas.height = 250;
                canvas.style.resize = 'both';
                const div = document.getElementById("linechart_machine_parent").appendChild(canvas);
                const ctx = document.getElementById('linechart_machine').getContext('2d');
                return ctx;
            }
        }

        const skip = 5;
        window.machineChart = new MachineChart(skip);
        await window.machineChart.getDateRange(moment().subtract(29, 'days'), moment(), '30DAYS');
        window.machineChart.updateData = { start: moment().subtract(29, 'days'), end: moment(), dayName: '30DAYS' };

        // let select = document.getElementById('machine_select');
        // select.addEventListener('change', async (event) => {
        //     if (event.target.value === 'All Machines') {
        //         const ctx = window.machineChart.createCanvas();
        //         const { start, end, dayName, isCompressed } = window.machineChart.updateData;
        //         await window.machineChart.getDateRange(start, end, dayName, isCompressed);
        //         const myNewChart = new Chart(ctx, {
        //             type: 'line',
        //             data: window.machineChart.lineData,
        //             options: window.lineOptions
        //         });
        //         return;
        //     }
        //     machineChart.displayOneMachineData(event.target.value);
        //     selectUpdate();
        // });

        pageSetUp()

        //----------------------DEPRECATED (OLD VERSION OF CHART JS)-------------------
        window.lineOptions = {
            ///Boolean - Whether grid lines are shown across the chart
            // scaleShowGridLines: true,
            //String - Colour of the grid lines
            // scaleGridLineColor: "rgba(0,0,0,.05)",
            //Number - Width of the grid lines
            // scaleGridLineWidth: 1,
            //Boolean - Whether the line is curved between points
            // bezierCurve: true,
            //Number - Tension of the bezier curve between points
            // bezierCurveTension: 0,
            //Boolean - Whether to show a dot for each point
            // pointDot: true,
            //Number - Radius of each point dot in pixels
            // pointDotRadius: 4,
            //Number - Pixel width of point dot stroke
            // pointDotStrokeWidth: 1,
            //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
            // pointHitDetectionRadius: 20,
            //Boolean - Whether to show a stroke for datasets
            // datasetStroke: true,
            //Number - Pixel width of dataset stroke
            // datasetStrokeWidth: 3,
            //Boolean - Whether to fill the dataset with a colour
            // datasetFill: true,
            //Boolean - Re-draw chart on page resize
            responsive: true,
            maintainAspectRatio: false,
            //String - A legend template
        };
        //----------------------------------------


        // render chart
        let canvas = document.getElementById("linechart_machine");
        var ctx = canvas.getContext("2d");
        var myNewChart = new Chart(ctx, {
            type: 'line',
            data: machineChart.lineData,
            options: window.lineOptions
        });

    })()
</script>


<script type="text/javascript">
    // PAGE RELATED SCRIPTS

    /* chart colors default */
    var $chrt_border_color = "#efefef";
    var $chrt_grid_color = "#DDD"
    var $chrt_main = "#E24913";
    /* red       */
    var $chrt_second = "#8CD600";
    /* blue      */
    var $chrt_third = "#FF9F01";
    /* orange    */
    var $chrt_fourth = "#FF0909";
    /* green     */
    var $chrt_fifth = "#BD362F";
    /* dark red  */
    var $chrt_mono = "#000";

    $(document).ready(function () {

        // DO NOT REMOVE : GLOBAL FUNCTIONS!
        (async () => {


            pageSetUp();

            var context = document.getElementById("linechart_machine2").getContext('2d');
            var myChart = new Chart(context, {
                type: 'horizontalBar',
                data: {
                    labels: [ "<  1", "1 - 2", "3 - 4", "5 - 9", "10 - 14", "15 - 19", "20 - 24" ],
                    datasets: [ {
                        label: 'Working',
                        backgroundColor: "green",
                        data: [ 12, 1, 19, 6, 16, 12, 24 ],
                    }, {
                        label: 'Not Working',
                        backgroundColor: "red",
                        data: [ 12, 23, 5, 18, 8, 12, 0 ],
                    } ]
                },
                options: {
                    scales: {
                        xAxes: [ {
                            stacked: true,
                        } ],
                        yAxes: [ {
                            stacked: true
                        } ]
                    },
                    responsive: true,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'top'
                    },
                }
            });

        })()
    });

    /* end flot charts */
</script>

</html>
